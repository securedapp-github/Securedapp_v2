import React from 'react';
import { PieChart } from 'react-minimal-pie-chart';

// Define the VulnerabilityPieChart component to display vulnerabilities in a pie chart
const VulnerabilityPieChart: React.FC<{ scanDetails: any }> = ({ scanDetails }) => {
  const totalVulnerabilities = Object.values(scanDetails.vulnerability_count).reduce(
    (sum: number, count: number) => sum + count,
    0
  );

  const data = [
    { value: scanDetails.vulnerability_count.critical, color: '#FF4136', title: 'Critical' }, // Critical - Red
    { value: scanDetails.vulnerability_count.high, color: '#FF851B', title: 'High' },         // High - Orange
    { value: scanDetails.vulnerability_count.medium, color: '#FFDC00', title: 'Medium' },     // Medium - Yellow
    { value: scanDetails.vulnerability_count.low, color: '#2ECC40', title: 'Low' },           // Low - Green
    { value: scanDetails.vulnerability_count.informational, color: '#0074D9', title: 'Informational' }, // Informational - Blue
    { value: scanDetails.vulnerability_count.gas, color: '#B10DC9', title: 'Gas' },           // Gas - Purple
  ];

  return (
    <div className="relative w-full max-w-lg mx-auto">  {/* Responsive container */}
      <PieChart
        data={data}
        style={{ height: '100%', width: '100%' }}  // Use 100% for responsive sizing
        lineWidth={23}  // Adjust line width accordingly
        labelStyle={{
          fontSize: '8px',
          fill: '#fff',
        }}
        radius={45}
        labelPosition={70}
      />
      <div className="absolute inset-0 flex flex-col justify-center items-center text-center">
        <p className="text-green-500 md:text-6xl text-3xl">
          {totalVulnerabilities}
        </p>
        <p className="text-green-400 md:text-2xl text-lg" id='poppins-bold'>
          Total <br /> Vulnerabilities <br /> Found
        </p>
      </div>
    </div>
  );
};

export default VulnerabilityPieChart;
